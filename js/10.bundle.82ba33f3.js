(window.webpackJsonp=window.webpackJsonp||[]).push([[10,32],{199:function(e,t,n){"use strict";n.r(t);n(60),n(233),n(92),n(51),n(63),n(73),n(58),n(64),n(38),n(74),n(52),n(59),n(65),n(75),n(66);var b=n(0),y=n.n(b),g=n(464),h=n(90),E=n(85),k=n(481),w=n(482),j=n(491),O=n(477),x=n(485),N=n(483),C=n(128),_=n(229),r=(n(191),n(180),n(31));function u(e,t,n,r,a,c,i){try{var o=e[c](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,a)}function a(o){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=o.apply(e,i);function a(e){u(r,t,n,a,c,"next",e)}function c(e){u(r,t,n,a,c,"throw",e)}a(void 0)})}}var P=function(){var e=a(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)("/personal_fm?timestamp=".concat(Date.now()));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),S=function(){var t=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.a)("/fm_trash?id=".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),A=n(42),R=n(179);function l(e,t,n,r,a,c,i){try{var o=e[c](i),u=o.value}catch(e){return void n(e)}o.done?t(u):Promise.resolve(u).then(r,a)}function T(o){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=o.apply(e,i);function a(e){l(r,t,n,a,c,"next",e)}function c(e){l(r,t,n,a,c,"throw",e)}a(void 0)})}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,a,c=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(o)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=new Audio;t.default=function(){if(!Object(A.d)())return y.a.createElement("div",null,"私人FM需要登录使用");var a=_.e.setPlaying;Object(b.useEffect)(function(){document.title="私人FM"}),Object(b.useEffect)(function(){var e=document.getElementsByClassName(h.a.middle)[0],t=document.getElementsByClassName(h.a.bottom)[0];e.style.height="calc(100% - 64px)",e.style.transition="height 1s",t.style.display="none";var n=_.c.src,r=_.c.currentTime;return toggleList.checked&&toggleList.click(),a(!1),_.c.currentTime=0,_.c.src="#",function(){e.style.height="calc(100% - 128px)",t.style.display="block",setTimeout(function(){return e.style.transition=""},1e3),_.c.src=n,_.c.currentTime=r}},[]);var e=F(Object(b.useState)(!1),2),t=e[0],n=e[1],r=F(Object(b.useState)(null),2),c=r[0],i=r[1],e=F(Object(b.useState)([]),2),o=e[0],u=e[1],r=F(Object(b.useState)(!1),2),l=r[0],s=r[1],f=Object(b.useRef)(null),m=Object(b.useRef)(null);Object(b.useEffect)(function(){0<o.length||function(){var e=T(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:n=e.sent,t=n.data.map(function(e){return{id:e.id,title:e.name,duration:e.duration/1e3,cover:e.album.picUrl}}),c||(n=t.pop(),i(n)),u(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},[o]);var e=function(){var e=T(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=4;break}I.pause(),e.next=6;break;case 4:return e.next=6,I.play();case 6:s(!l);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),r=function(){n(!0),Object(R.a)(c.id)},d=Object(b.useCallback)(function(){var e,t;0!==o.length&&(t=(e=o.slice()).pop(),i(t),u(e),n(!1),f.current.style.setProperty("--time","'-00:00'"),m.current.style.setProperty("--progress","0"))},[o,f.current,m.current]),p=Object(b.useCallback)(function(){l&&I.play()},[l]),v=Object(b.useCallback)(function(){var e,t;I.readyState===I.HAVE_ENOUGH_DATA&&(e=I.currentTime/I.duration*100+"%",t="-"+Object(A.b)(I.duration-I.currentTime),f.current.style.setProperty("--time","'".concat(t,"'")),m.current.style.setProperty("--progress",e))},[f.current,m.current]);return Object(b.useEffect)(function(){c&&(I.src="https://music.163.com/song/media/outer/url?id=".concat(c.id))},[c]),Object(b.useEffect)(function(){I.onended=d,I.oncanplay=p,I.ontimeupdate=v},[d,p]),c?y.a.createElement("div",{className:g.default["personal-fm"]},y.a.createElement("div",{className:g.default.title},"私人FM"),y.a.createElement("div",{className:g.default["music-box"]},y.a.createElement("div",{className:g.default.image},y.a.createElement("img",{src:"".concat(Object(A.e)(c.cover),"?param=300y300")})),y.a.createElement(E.b,{className:g.default.song,to:"/Song?id=".concat(c.id),target:"_blank",title:c.title},c.title),y.a.createElement("div",{className:g.default["progress-container"],ref:f},y.a.createElement("div",{className:g.default.progress,ref:m,onClick:function(e){var t=m.current,t=(e.pageX-t.offsetLeft)/t.clientWidth;I.currentTime=t*c.duration}})),y.a.createElement("div",{className:g.default["btn-container"]},l?y.a.createElement("div",{className:g.default.icon,title:"暂停",onClick:e},y.a.createElement(k.a,null)):y.a.createElement("div",{className:g.default.icon,title:"播放",onClick:e},y.a.createElement(w.a,null)),t?y.a.createElement("div",{className:g.default.icon,title:"喜欢",onClick:r},y.a.createElement(j.a,{style:{color:"#C62F2F"}})):y.a.createElement("div",{className:g.default.icon,title:"喜欢",onClick:r},y.a.createElement(O.a,null)),y.a.createElement("div",{className:g.default.icon,title:"不喜欢",onClick:function(){S(c.id),d()}},y.a.createElement(x.a,null)),y.a.createElement("div",{className:g.default.icon,title:"下一首",onClick:d},y.a.createElement(N.a,null))))):y.a.createElement(C.a,null)}},464:function(e,t,n){"use strict";n.r(t),t.default={"personal-fm":"personal-fm_27kHT",title:"title_DN0r-","music-box":"music-box_1c1Fm",image:"image_3P-kP",song:"song_G9sNu","progress-container":"progress-container_3KUWt",progress:"progress_1fvvk","btn-container":"btn-container_xwmLI",icon:"icon_2apsd"}}}]);