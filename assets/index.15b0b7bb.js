import{F as E,s as $,b as k,c as w,d as L,m as j,e as I}from"./index.9aa33242.js";import{r as p,j as i,F as D,b as e,L as b,B as F,C as P,H as O,l as H}from"./vendor.2d5e396e.js";function T({detailData:d,songList:l,songIds:s}){const{setPlaylist:o,playSong:u}=p.exports.useContext(E),{title:h,cover:m,creator:a,tags:g,description:v}=d,n=async()=>{let t=[];if(l)t=l.filter(c=>c.isFree);else if(s){const c=Math.ceil(s.length*.02);for(let y=0;y<c;++y){const N=y*50,C=s.slice(N,N+50),x=await $(C),A=k(x.songs,"detail").filter(S=>S.isFree);t=[...t,...A]}}w().delAll(),o(t),u(t[0])};return i(D,{children:[e("div",{className:"list-left",children:e("div",{className:"image",children:e("img",{src:`${m}?param=240y240`})})}),i("div",{className:"list-right",children:[e("div",{className:"title-playlist",children:h}),i("div",{className:"creator",children:[i(b,{to:`/User?id=${a.id}`,children:[e("img",{src:`${a.avatar}?param=40y40`}),a.name]}),new Date(a.createTime).toLocaleDateString().replace(/\//g,"-"),"\u521B\u5EFA"]}),e("div",{className:"btns",children:e(F,{icon:e(P,{}),onClick:n,children:"\u64AD\u653E\u5168\u90E8"})}),i("div",{className:"tags",children:["\u6807\u7B7E\uFF1A",g.map((t,c)=>e("span",{children:t},c))]}),e("div",{className:"description",children:v})]})]})}function M({detailData:d,songList:l}){const{playSong:s,setPlaylist:o}=p.exports.useContext(E),{title:u,cover:h,singers:m,publishTime:a,description:g}=d,v=()=>{const n=l[0];s(n),o(l)};return i(D,{children:[e("div",{className:"list-left",children:e("div",{className:"image",children:e("img",{src:`${h}?param=240y240`})})}),i("div",{className:"list-right",children:[e("div",{className:"title-album",children:u}),i("div",{className:"singer",children:["\u6B4C\u624B\uFF1A",m.map(({id:n,name:t},c)=>i(p.exports.Fragment,{children:[e(b,{to:`/Singer?id=${n}`,children:t}),e("span",{children:" / "})]},c))]}),i("div",{children:["\u53D1\u884C\u65F6\u95F4\uFF1A",new Date(a).toLocaleDateString().replace(/\//g,"-")]}),e("div",{className:"btns",children:e(F,{icon:e(P,{}),onClick:v,children:"\u64AD\u653E\u5168\u90E8"})}),e("div",{className:"description",children:g})]})]})}function R({detailData:d,songData:l,lyric:s}){const{title:o,cover:u,singers:h,albumId:m,albumName:a}=d,{id:g,name:v,isFree:n}=l,{playSong:t,collectSong:c,setPlaylist:y}=p.exports.useContext(E),{playingItem:N,playlist:C}=p.exports.useContext(L),x=()=>{if(N.id!==l.id){if(!C.find(r=>r.id===l.id)){const r=C.slice();r.push(l),y(r)}t(l)}},A=()=>{c(g)},S=()=>{j().download(g,v)};return i(D,{children:[e("div",{className:"list-left",children:e("div",{className:"image",children:e("img",{src:`${u}?param=240y240`})})}),i("div",{className:"list-right",children:[e("div",{className:"title-song",children:o}),i("div",{className:"singer",children:["\u6B4C\u624B\uFF1A",h.map(({id:r,name:f},B)=>i(p.exports.Fragment,{children:[e(b,{to:`/Singer?id=${r}`,children:f}),e("span",{children:" / "})]},B))]}),i("div",{children:["\u6240\u5C5E\u4E13\u8F91\uFF1A",e(b,{to:`/Album?id=${m}`,children:a})]}),i("div",{className:"btns",children:[e(F,{icon:e(P,{}),onClick:x,disabled:!n,children:"\u64AD\u653E"}),e(F,{icon:e(O,{}),onClick:A,disabled:!n,children:"\u6DFB\u52A0\u5230\u6B4C\u5355"}),e(F,{icon:e(H,{}),onClick:S,disabled:!n,children:"\u4E0B\u8F7D"})]}),e("input",{type:"checkbox",id:"toggle-lyric",className:"toggle",style:{display:"none"}}),s.length===0&&e("div",{children:"\u6682\u65E0\u6B4C\u8BCD"}),e("div",{className:"lyric",children:s.map(([r,f],B)=>i("p",{children:[r,f&&i(D,{children:[e("br",{}),f]})]},B))}),e("label",{htmlFor:"toggle-lyric"})]})]})}function z({data:d}){const{detail:l,songList:s,songIds:o,lyric:u}=d,{isPlaylist:h,isAlbum:m,isSong:a}=l;return i("div",{className:I.detail,children:[h&&e(T,{detailData:l,songList:s,songIds:o}),m&&e(M,{detailData:l,songList:s}),a&&e(R,{detailData:l,songData:s[0],lyric:u})]})}export{z as D};
