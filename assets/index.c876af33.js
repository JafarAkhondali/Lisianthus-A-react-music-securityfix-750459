var N=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var b=(s,e,t)=>e in s?N(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,m=(s,e)=>{for(var t in e||(e={}))k.call(e,t)&&b(s,t,e[t]);if(h)for(var t of h(e))w.call(e,t)&&b(s,t,e[t]);return s},p=(s,e)=>C(s,F(e));import{b as c,j as r,L as v,D as g,r as f,M as x}from"./vendor.47a03c39.js";import{L as B,g as y,i as D,j,k as S}from"./index.c1dc2289.js";const E="_view_xp5ei_1";var L={view:E};function P({pageState:s,onDelete:e}){if(!s)return c(B,{});const{create:t,subscribe:o}=s;return r("div",{className:L.view,children:[c("div",{className:"title",children:"\u6211\u521B\u5EFA\u7684\u6B4C\u5355"}),t.map(({name:n,coverImgUrl:u,trackCount:i,id:a})=>r(v,{className:"item",to:`/Playlist?id=${a}`,children:[c("div",{className:"image",children:c("img",{src:`${y(u)}?param=100y100`,loading:"lazy"})}),r("div",{className:"content",children:[c("span",{children:n}),r("span",{children:[i,"\u9996"]})]}),c(g,{className:"delete",onClick:l=>{l.preventDefault(),e(a,1)}})]},a)),c("div",{className:"title",children:"\u6211\u6536\u85CF\u7684\u6B4C\u5355"}),o.map(({name:n,coverImgUrl:u,trackCount:i,id:a})=>r(v,{className:"item",to:`/Playlist?id=${a}`,children:[c("div",{className:"image",children:c("img",{src:`${y(u)}?param=100y100`,loading:"lazy"})}),r("div",{className:"content",children:[c("span",{children:n}),r("span",{children:[i,"\u9996"]})]}),c(g,{className:"delete",onClick:l=>{l.preventDefault(),e(a,2)}})]},a))]})}function M(){const s=window.localStorage.getItem("userid");if(!s||!D())return c("div",{children:"\u9700\u8981\u767B\u5F55\u4F7F\u7528"});const[e,t]=f.exports.useState(null),o=(n,u)=>{x.confirm({maskClosable:!0,title:"\u5220\u9664\u6B4C\u5355",content:"\u662F\u5426\u8981\u5220\u9664\u8BE5\u6B4C\u5355\uFF1F",okText:"\u662F",cancelText:"\u5426",onOk:()=>{let i;if(u===1){const a=e.create.findIndex(d=>d.id===n),l=e.create.slice();l.splice(a,1),i=p(m({},e),{create:l})}else{const a=e.subscribe.findIndex(d=>d.id===n),l=e.subscribe.slice();l.splice(a,1),i=p(m({},e),{subscribe:l})}return t(i),j(n)},onCancel:()=>{x.destroyAll()}})};return f.exports.useEffect(()=>{document.title="\u6211\u7684\u6B4C\u5355"},[]),f.exports.useEffect(()=>{(async()=>{const u=await S(s),i={create:[],subscribe:[]};u.playlist.forEach(a=>{a.subscribed?i.subscribe.push(a):i.create.push(a)}),t(i)})()},[]),c(P,{pageState:e,onDelete:o})}export{M as default};
