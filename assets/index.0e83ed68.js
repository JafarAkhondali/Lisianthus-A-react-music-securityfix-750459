var N=Object.defineProperty,C=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var h=(s,e,t)=>e in s?N(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,m=(s,e)=>{for(var t in e||(e={}))k.call(e,t)&&h(s,t,e[t]);if(b)for(var t of b(e))w.call(e,t)&&h(s,t,e[t]);return s},p=(s,e)=>C(s,F(e));import{j as i,b as r,L as v,D as x,r as f,M as g}from"./vendor.fb93b9f7.js";import{L as B,d as y,j as D,k as j,n as S}from"./index.5b36a761.js";const E="_view_xp5ei_1";var L={view:E};function P({pageState:s,onDelete:e}){if(!s)return i(B,{});const{create:t,subscribe:o}=s;return r("div",{className:L.view,children:[i("div",{className:"title",children:"\u6211\u521B\u5EFA\u7684\u6B4C\u5355"}),t.map(({name:n,coverImgUrl:u,trackCount:c,id:a})=>r(v,{className:"item",to:`/Playlist?id=${a}`,children:[i("div",{className:"image",children:i("img",{src:`${y(u)}?param=100y100`,loading:"lazy"})}),r("div",{className:"content",children:[i("span",{children:n}),r("span",{children:[c,"\u9996"]})]}),i(x,{className:"delete",onClick:l=>{l.preventDefault(),e(a,1)}})]},a)),i("div",{className:"title",children:"\u6211\u6536\u85CF\u7684\u6B4C\u5355"}),o.map(({name:n,coverImgUrl:u,trackCount:c,id:a})=>r(v,{className:"item",to:`/Playlist?id=${a}`,children:[i("div",{className:"image",children:i("img",{src:`${y(u)}?param=100y100`,loading:"lazy"})}),r("div",{className:"content",children:[i("span",{children:n}),r("span",{children:[c,"\u9996"]})]}),i(x,{className:"delete",onClick:l=>{l.preventDefault(),e(a,2)}})]},a))]})}function M(){const s=window.localStorage.getItem("userid");if(!s||!D())return i("div",{children:"\u9700\u8981\u767B\u5F55\u4F7F\u7528"});const[e,t]=f.exports.useState(null),o=(n,u)=>{g.confirm({maskClosable:!0,title:"\u5220\u9664\u6B4C\u5355",content:"\u662F\u5426\u8981\u5220\u9664\u8BE5\u6B4C\u5355\uFF1F",okText:"\u662F",cancelText:"\u5426",onOk:()=>{let c;if(u===1){const a=e.create.findIndex(d=>d.id===n),l=e.create.slice();l.splice(a,1),c=p(m({},e),{create:l})}else{const a=e.subscribe.findIndex(d=>d.id===n),l=e.subscribe.slice();l.splice(a,1),c=p(m({},e),{subscribe:l})}return t(c),j(n)},onCancel:()=>{g.destroyAll()}})};return f.exports.useEffect(()=>{document.title="\u6211\u7684\u6B4C\u5355"},[]),f.exports.useEffect(()=>{(async()=>{const u=await S(s),c={create:[],subscribe:[]};u.playlist.forEach(a=>{a.subscribed?c.subscribe.push(a):c.create.push(a)}),t(c)})()},[]),i(P,{pageState:e,onDelete:o})}export{M as default};
