import{j as t,b as y,L as P,l as C,r as j}from"./vendor.fb93b9f7.js";import{T as f}from"./index.cab4daa5.js";import{S as w,P as I}from"./index.925490fd.js";import{L as v,u as B,q as N,t as U,b as _,d as b}from"./index.cb990636.js";const F="_view_i5per_1";var T={view:F},$={"link-image-list":"_link-image-list_cdedt_1"};function c({children:a}){return t("div",{className:$["link-image-list"],children:a})}function D({src:a,linkTo:e,text:n}){return y("div",{className:"item",children:[t(P,{to:e,className:"item-image",children:t("img",{src:`${a}?param=240y240`,loading:"lazy"})}),t(P,{to:e,className:"item-info",children:n})]})}c.Item=D;function z({data:a}){return t(c,{children:a.map(({id:e,name:n,singer:s,picUrl:i})=>{const h=y(C,{children:[t("div",{children:n}),t("div",{children:s.map(({name:o})=>o).join(" / ")})]});return t(c.Item,{linkTo:`/Album?id=${e}`,src:i,text:h},e)})})}function A({data:a}){return t(c,{children:a.map(({id:e,name:n,picUrl:s})=>t(c.Item,{linkTo:`/Singer?id=${e}`,src:s,text:n},e))})}function E({data:a}){return t(c,{children:a.map(({id:e,name:n,picUrl:s})=>t(c.Item,{linkTo:`/Playlist?id=${e}`,src:s,text:n},e))})}function H({pageState:a,setPageState:e}){const{loading:n,data:s,currentPage:i,total:h}=a;return y("div",{className:T.view,children:[y(f,{onChange:o=>{e({type:o,loading:!0,currentPage:1})},children:[t(f.Pane,{text:"\u5355\u66F2",children:n?t(v,{}):t(w,{songList:s})},"song"),t(f.Pane,{text:"\u4E13\u8F91",children:n?t(v,{}):t(z,{data:s})},"album"),t(f.Pane,{text:"\u6B4C\u624B",children:n?t(v,{}):t(A,{data:s})},"singer"),t(f.Pane,{text:"\u6B4C\u5355",children:n?t(v,{}):t(E,{data:s})},"playlist")]}),t(I,{currentPage:i,total:h,pageSize:30,onChange:o=>{e({currentPage:o})}})]})}const q={currentPage:1,total:0,type:"song",loading:!0,data:[]},M={song:"1",album:"10",singer:"100",playlist:"1000"};function K(){const a=B("keyword");if(!a)return t("div",{children:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9"});const[e,n]=N(q);return j.exports.useEffect(()=>{const{currentPage:s,type:i}=e;n({loading:!0}),(async()=>{const o=(s-1)*30,r=await U(a,M[i],o);let u=[],d=0;i==="song"?(u=_(r.result.songs,"search"),d=r.result.songCount):i==="album"?(u=r.result.albums.map(l=>{const{id:m,name:g,artists:p}=l,x=b(l.picUrl),L=p.map(({id:S,name:k})=>({id:S,name:k}));return{id:m,name:g,picUrl:x,singer:L}}),d=r.result.albumCount):i==="singer"?(u=r.result.artists.map(l=>{const{id:m,name:g}=l,p=b(l.picUrl);return{id:m,name:g,picUrl:p}}),d=r.result.artistCount):i==="playlist"&&(u=r.result.playlists.map(l=>{const{id:m,name:g,description:p}=l,x=b(l.coverImgUrl);return{id:m,name:g,picUrl:x,description:p}}),d=r.result.playlistCount),n({loading:!1,total:d,data:u})})()},[a,e.currentPage,e.type]),t(H,{pageState:e,setPageState:n})}export{K as default};
