var Mt=Object.defineProperty,Pt=Object.defineProperties;var Lt=Object.getOwnPropertyDescriptors;var Ze=Object.getOwnPropertySymbols;var Ot=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var Oe=(e,n,t)=>n in e?Mt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,O=(e,n)=>{for(var t in n||(n={}))Ot.call(n,t)&&Oe(e,t,n[t]);if(Ze)for(var t of Ze(n))Rt.call(n,t)&&Oe(e,t,n[t]);return e},q=(e,n)=>Pt(e,Lt(n));var L=(e,n,t)=>(Oe(e,typeof n!="symbol"?n+"":n,t),t);import{r as p,u as Re,a as Je,j as m,b as d,T as jt,B as Qe,M as Se,m as je,F as Ne,L as k,c as zt,d as Ut,e as xe,I as ze,f as et,S as tt,A as Vt,U as Ht,g as qt,P as Wt,C as Ue,h as Gt,i as Xt,D as Ve,k as nt,l as st,R as Kt,n as Yt,o as Zt,p as Jt,H as at,G as Qt,q as en,s as be,t as tn,v as nn}from"./vendor.47a03c39.js";const sn=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}};sn();const rt=(e,n)=>{const t=p.exports.useRef(()=>{});p.exports.useEffect(()=>{t.current=e},[e]),p.exports.useEffect(()=>{if(n!==null){const i=setInterval(()=>t.current(),n);return()=>clearInterval(i)}},[n])},an=(e={})=>{const[n,t]=p.exports.useState(e),i=p.exports.useCallback(s=>{t(o=>Object.assign({},o,s instanceof Function?s(o):s))},[]);return[n,i]},rn=e=>{const{search:n}=Re(),t=new RegExp(`[?&]${e}=([\\w%]+)`),i=n.match(t);return i?i[1]:null},on="http://127.0.0.1:4001",ln={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0},T=async(e,n={})=>(await Je(O(O({url:on+e},ln),n))).data,cn=30;class un{constructor(){L(this,"cacheIds");L(this,"cache");this.cacheIds=[],this.cache=new Map}save(n,t){const{cache:i,cacheIds:s}=this;if(s.length>=cn){const o=s.shift();i.delete(o)}i.set(n,t),s.push(n)}get(n){return this.cache.get(n)||null}del(n){const{cache:t,cacheIds:i}=this,s=i.findIndex(o=>o===n);s!==-1&&(i.splice(s,1),t.delete(n))}delAll(){const{cache:n}=this;n.clear(),this.cacheIds=[]}}var Fe=(()=>{let e;return()=>e||(e=new un)})();const ta=e=>T(`/comment/music?id=${e}`),it=e=>T(`/song/detail?ids=${e.join()}`),dn=async e=>T(`/lyric?id=${e}`),hn=()=>{const e=Number(localStorage.getItem("timestampBefore"));if(Date.now()>=e)return localStorage.removeItem("timestampBefore"),localStorage.removeItem("token"),!1;const n=localStorage.getItem("token");return Boolean(n)},ae=e=>{const n=e/60>>0,t=e%60>>0;return`${n.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},mn=e=>{const n=Date.now()-e,t=new Date(n);return n<=6e4?"\u521A\u521A":n<=36e5?`${n/6e4>>0} \u5206\u949F\u524D`:n<=864e5?`${n/36e5>>0} \u5C0F\u65F6\u524D`:t.getFullYear()>1970?`${t.getFullYear()-1970} \u5E74\u524D`:t.getMonth()?`${t.getMonth()} \u6708\u524D`:`${t.getDate()-1} \u5929\u524D`},pn=(e,n)=>{let t;return function(...i){clearTimeout(t),t=setTimeout(()=>{e.call(this,...i)},n)}},H=e=>e.replace(/http\:/,"https:"),fn=e=>{const[n,t,i]=e.match(/\d+/g);return Number(n)*60+Number(t)+Number(i)*.001},gn=e=>{var r,u;const{uncollected:n,nolyric:t,lrc:i,tlyric:s}=e;if(n||t)return[];const o=i.lyric.split(`
`).filter(h=>/\d+\:\d+[\.\:]\d+/.test(h)),l=((u=(r=s==null?void 0:s.lyric)==null?void 0:r.split(`
`))==null?void 0:u.filter(h=>/\d+\:\d+[\.\:]\d+/.test(h)))||[],a=(h,g)=>{const N=h.lastIndexOf("]"),y=h.slice(N+1);h.match(/\d+\:\d+[\.\:]\d+/g).forEach(w=>{const F=fn(w);g?c[F]=[y,"",F]:c[F]&&(c[F][1]=y)})},c={};return o.forEach(h=>a(h,!0)),l.forEach(h=>a(h,!1)),Object.values(c).sort((h,g)=>h[2]-g[2])},ot=(e,n)=>e.map(t=>{const{id:i,name:s}=t,o=["topSong","fm","search"].includes(n)?t.album:t.al,l=n==="detail"?t.ar:t.artists,a=["simiSong","fm","search"].includes(n)?t.duration:t.dt,c=t.fee!==1;return{id:i,name:s,isFree:c,duration:a*.001,singers:l.map(({id:r,name:u})=>({id:r,name:u})),albumId:o.id,albumName:o.name,cover:H(o.picUrl||"")}}),na=e=>{const n=e.hasOwnProperty("playlist"),t=e.hasOwnProperty("album"),i=!n&&!t;if(n){const{name:s,tags:o,description:l,createTime:a}=e.playlist,c=H(e.playlist.coverImgUrl),r={id:e.playlist.creator.userId,name:e.playlist.creator.nickname,avatar:H(e.playlist.creator.avatarUrl),createTime:a},u=Number(localStorage.getItem("userid"))===r.id;return{isPlaylist:n,isAlbum:t,isSong:i,title:s,cover:c,creator:r,isCreator:u,tags:o,description:l}}else if(t){const{name:s,publishTime:o,description:l}=e.album,a=e.album.artists.map(({id:r,name:u})=>({id:r,name:u})),c=H(e.album.picUrl);return{isPlaylist:n,isAlbum:t,isSong:i,title:s,cover:c,singers:a,publishTime:o,description:l}}else{const{name:s,al:{id:o,name:l}}=e.songs[0],a=e.songs[0].ar.map(({id:r,name:u})=>({id:r,name:u})),c=H(e.songs[0].al.picUrl);return{isPlaylist:n,isAlbum:t,isSong:i,title:s,cover:c,singers:a,albumId:o,albumName:l}}};var vn=function(e){function n(i){if(t[i])return t[i].exports;var s=t[i]={i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}var t={};return n.m=e,n.c=t,n.i=function(i){return i},n.d=function(i,s,o){n.o(i,s)||Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:o})},n.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(s,"a",s),s},n.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},n.p="",n(n.s=0)}([function(e,n,t){function i(s){if(this.size=0|s,this.size<=1||(this.size&this.size-1)!=0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=s<<1;for(var o=new Array(2*this.size),l=0;l<o.length;l+=2){var a=Math.PI*l/this.size;o[l]=Math.cos(a),o[l+1]=-Math.sin(a)}this.table=o;for(var c=0,r=1;this.size>r;r<<=1)c++;this._width=c%2==0?c-1:c,this._bitrev=new Array(1<<this._width);for(var u=0;u<this._bitrev.length;u++){this._bitrev[u]=0;for(var h=0;h<this._width;h+=2){var g=this._width-h-2;this._bitrev[u]|=(u>>>h&3)<<g}}this._out=null,this._data=null,this._inv=0}e.exports=i,i.prototype.fromComplexArray=function(s,o){for(var l=o||new Array(s.length>>>1),a=0;a<s.length;a+=2)l[a>>>1]=s[a];return l},i.prototype.createComplexArray=function(){for(var s=new Array(this._csize),o=0;o<s.length;o++)s[o]=0;return s},i.prototype.toComplexArray=function(s,o){for(var l=o||this.createComplexArray(),a=0;a<l.length;a+=2)l[a]=s[a>>>1],l[a+1]=0;return l},i.prototype.completeSpectrum=function(s){for(var o=this._csize,l=o>>>1,a=2;a<l;a+=2)s[o-a]=s[a],s[o-a+1]=-s[a+1]},i.prototype.transform=function(s,o){if(s===o)throw new Error("Input and output buffers must be different");this._out=s,this._data=o,this._inv=0,this._transform4(),this._out=null,this._data=null},i.prototype.realTransform=function(s,o){if(s===o)throw new Error("Input and output buffers must be different");this._out=s,this._data=o,this._inv=0,this._realTransform4(),this._out=null,this._data=null},i.prototype.inverseTransform=function(s,o){if(s===o)throw new Error("Input and output buffers must be different");this._out=s,this._data=o,this._inv=1,this._transform4();for(var l=0;l<s.length;l++)s[l]/=this.size;this._out=null,this._data=null},i.prototype._transform4=function(){var s,o,l=this._out,a=this._csize,c=this._width,r=1<<c,u=a/r<<1,h=this._bitrev;if(u===4)for(s=0,o=0;s<a;s+=u,o++){var g=h[o];this._singleTransform2(s,g,r)}else for(s=0,o=0;s<a;s+=u,o++){var N=h[o];this._singleTransform4(s,N,r)}var y=this._inv?-1:1,_=this.table;for(r>>=2;r>=2;r>>=2){u=a/r<<1;var w=u>>>2;for(s=0;s<a;s+=u)for(var F=s+w,C=s,f=0;C<F;C+=2,f+=r){var v=C,b=v+w,x=b+w,S=x+w,A=l[v],B=l[v+1],M=l[b],P=l[b+1],V=l[x],j=l[x+1],z=l[S],X=l[S+1],K=A,Y=B,Z=_[f],J=y*_[f+1],oe=M*Z-P*J,le=M*J+P*Z,ce=_[2*f],ue=y*_[2*f+1],de=V*ce-j*ue,he=V*ue+j*ce,me=_[3*f],pe=y*_[3*f+1],fe=z*me-X*pe,ge=z*pe+X*me,ve=K+de,ee=Y+he,te=K-de,ye=Y-he,_e=oe+fe,ne=le+ge,se=y*(oe-fe),Ce=y*(le-ge),we=ve+_e,De=ee+ne,Be=ve-_e,ke=ee-ne,Te=te+Ce,Me=ye-se,Pe=te-Ce,Le=ye+se;l[v]=we,l[v+1]=De,l[b]=Te,l[b+1]=Me,l[x]=Be,l[x+1]=ke,l[S]=Pe,l[S+1]=Le}}},i.prototype._singleTransform2=function(s,o,l){var a=this._out,c=this._data,r=c[o],u=c[o+1],h=c[o+l],g=c[o+l+1],N=r+h,y=u+g,_=r-h,w=u-g;a[s]=N,a[s+1]=y,a[s+2]=_,a[s+3]=w},i.prototype._singleTransform4=function(s,o,l){var a=this._out,c=this._data,r=this._inv?-1:1,u=2*l,h=3*l,g=c[o],N=c[o+1],y=c[o+l],_=c[o+l+1],w=c[o+u],F=c[o+u+1],C=c[o+h],f=c[o+h+1],v=g+w,b=N+F,x=g-w,S=N-F,A=y+C,B=_+f,M=r*(y-C),P=r*(_-f),V=v+A,j=b+B,z=x+P,X=S-M,K=v-A,Y=b-B,Z=x-P,J=S+M;a[s]=V,a[s+1]=j,a[s+2]=z,a[s+3]=X,a[s+4]=K,a[s+5]=Y,a[s+6]=Z,a[s+7]=J},i.prototype._realTransform4=function(){var s,o,l=this._out,a=this._csize,c=this._width,r=1<<c,u=a/r<<1,h=this._bitrev;if(u===4)for(s=0,o=0;s<a;s+=u,o++){var g=h[o];this._singleRealTransform2(s,g>>>1,r>>>1)}else for(s=0,o=0;s<a;s+=u,o++){var N=h[o];this._singleRealTransform4(s,N>>>1,r>>>1)}var y=this._inv?-1:1,_=this.table;for(r>>=2;r>=2;r>>=2){u=a/r<<1;var w=u>>>1,F=w>>>1,C=F>>>1;for(s=0;s<a;s+=u)for(var f=0,v=0;f<=C;f+=2,v+=r){var b=s+f,x=b+F,S=x+F,A=S+F,B=l[b],M=l[b+1],P=l[x],V=l[x+1],j=l[S],z=l[S+1],X=l[A],K=l[A+1],Y=B,Z=M,J=_[v],oe=y*_[v+1],le=P*J-V*oe,ce=P*oe+V*J,ue=_[2*v],de=y*_[2*v+1],he=j*ue-z*de,me=j*de+z*ue,pe=_[3*v],fe=y*_[3*v+1],ge=X*pe-K*fe,ve=X*fe+K*pe,ee=Y+he,te=Z+me,ye=Y-he,_e=Z-me,ne=le+ge,se=ce+ve,Ce=y*(le-ge),we=y*(ce-ve),De=ee+ne,Be=te+se,ke=ye+we,Te=_e-Ce;if(l[b]=De,l[b+1]=Be,l[x]=ke,l[x+1]=Te,f!==0){if(f!==C){var Me=ye,Pe=-_e,Le=ee,Nt=-te,xt=-y*we,Ft=-y*Ce,At=-y*se,Et=-y*ne,$t=Me+xt,It=Pe+Ft,Dt=Le+Et,Bt=Nt-At,Ke=s+F-f,Ye=s+w-f;l[Ke]=$t,l[Ke+1]=It,l[Ye]=Dt,l[Ye+1]=Bt}}else{var kt=ee-ne,Tt=te-se;l[S]=kt,l[S+1]=Tt}}}},i.prototype._singleRealTransform2=function(s,o,l){var a=this._out,c=this._data,r=c[o],u=c[o+l],h=r+u,g=r-u;a[s]=h,a[s+1]=0,a[s+2]=g,a[s+3]=0},i.prototype._singleRealTransform4=function(s,o,l){var a=this._out,c=this._data,r=this._inv?-1:1,u=2*l,h=3*l,g=c[o],N=c[o+l],y=c[o+u],_=c[o+h],w=g+y,F=g-y,C=N+_,f=r*(N-_),v=w+C,b=F,x=-f,S=w-C,A=F,B=f;a[s]=v,a[s+1]=0,a[s+2]=b,a[s+3]=x,a[s+4]=S,a[s+5]=0,a[s+6]=A,a[s+7]=B}}]);const re=512,lt=.08,ct=.8,ut=re/2+1,Q=new Array(ut).fill(0),yn=e=>.54-.46*Math.cos(6.283185307179586*e/(re-1)),_n=e=>{const n=new vn(re),t=n.createComplexArray();n.realTransform(t,e);for(let i=0;i<ut;++i){const s=t[2*i],o=t[2*i+1],l=(s**2+o**2)**.5,a=Math.log10(l)*20;if(!isFinite(a)){Q[i]=0;continue}a<Q[i]?Q[i]=a*lt+Q[i]*(1-lt):Q[i]=a*ct+Q[i]*(1-ct)}};function Cn(e){const n=e.getChannelData(0),i=R().getCurrentTime()/e.duration*n.length>>0,s=n.slice(i,i+re),o=re-s.length;for(let l=0;l<o;++l)s[s.length]=0;for(let l=0;l<re;++l){const a=yn(l);s[l]*=a}return _n(s),Q.map(l=>l?(l+20)*.0125:0)}const He=900,Ae=310;class bn{constructor(){L(this,"onEnded");L(this,"startTime");L(this,"playingItem");L(this,"rejectFn");L(this,"audioContext");L(this,"gainNode");L(this,"reqId");L(this,"canvasContext");L(this,"currentSource");this.audioContext=new AudioContext,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.canvasContext=null,this.currentSource=null,this.onEnded=null,this.startTime=!1,this.playingItem=null,this.rejectFn=()=>{},this.reqId=0,this.drawCanvas=this.drawCanvas.bind(this),console.info("musicInstance",this)}drawCanvas(){this.reqId=requestAnimationFrame(this.drawCanvas);const{canvasContext:n,playingItem:t}=this;if(!t)return;const i=Cn(t.abuffer);n.clearRect(0,0,He,Ae);const s=He/i.length;for(let o=0;o<i.length;++o){const l=i[o]*Ae,a=o*s,c=Ae-l;n.fillRect(a,c,s,l)}}getMusic(n){return new Promise((t,i)=>{var l,a;const{audioContext:s}=this;if(this.rejectFn=i,n===((a=(l=this.playingItem)==null?void 0:l.info)==null?void 0:a.id)){t(this.playingItem);return}const o=Fe().get(n);if(o){s.decodeAudioData(o.buffer.slice(0)).then(c=>{t(q(O({},o),{abuffer:c}))});return}T(`/getMusicUrl?id=${n}`).then(c=>{var h;if(c.error||((h=c.url)==null?void 0:h.includes("music.163.com/404"))){t(null);return}const{url:r}=c,u=Je({url:H(r),responseType:"arraybuffer"}).then(g=>g.data).catch(g=>null);Promise.all([u,it([n]),dn(n)]).then(([g,N,y])=>{if(g===null){console.log("get music fail, id:",n),t(null);return}const _=ot(N.songs,"detail")[0],w=gn(y),F={buffer:g,info:q(O({},_),{lyric:w})};Fe().save(n,F),s.decodeAudioData(g.slice(0)).then(C=>{F.info.duration=C.duration,t(q(O({},F),{abuffer:C}))})})})})}async restart(){return await this.audioContext.resume(),!0}async play(n,t){const{currentSource:i,audioContext:s,gainNode:o,playingItem:l,rejectFn:a}=this;if(a(),s.state==="suspended"&&(this.restart(),l&&l.info.id===n&&t===void 0))return!0;this.startTime=!1,i&&(i.onended=null,i.stop(0),i.disconnect());const c=await this.getMusic(n).catch(u=>null);if(!c)return!1;const r=s.createBufferSource();return r.buffer=c.abuffer,r.connect(o),this.currentSource=r,this.startTime=s.currentTime-(t||0),r.start(s.currentTime,t||0),this.playingItem=c,r.onended=()=>{this.startTime=!1,this.onEnded&&this.onEnded()},!0}async pause(){return await this.audioContext.suspend(),!0}setVolume(n){this.gainNode.gain.value=n}drawStart(){cancelAnimationFrame(this.reqId),this.reqId=requestAnimationFrame(this.drawCanvas)}drawStop(){this.canvasContext.clearRect(0,0,He,Ae),cancelAnimationFrame(this.reqId)}setCanvasContext(n){n.fillStyle="#6dccff",this.canvasContext=n}async download(n,t){const i=await this.getMusic(n);if(!i)return!1;const s=new Blob([i.buffer]),o=URL.createObjectURL(s),l=document.createElement("a");return l.href=o,l.download=`${t}.mp3`,l.click(),URL.revokeObjectURL(o),!0}setOnEnded(n){this.onEnded=n}getCurrentTime(){const{audioContext:n,startTime:t}=this;return t!==!1?n.currentTime-t:0}getPlayingItem(){return this.playingItem.info}}var R=(()=>{let e;return()=>e||(e=new bn)})();const wn="_container_nbwis_9";var Sn={container:wn,"scale-out-in":"_scale-out-in_nbwis_1"};const Nn=new Array(16).fill(0);function qe({text:e}){return m("div",{className:Sn.container,children:[d("div",{className:"loader",children:Nn.map((n,t)=>d("div",{className:"square"},t))}),d("div",{className:"loading-text",children:e||"\u52A0\u8F7D\u4E2D"})]})}const xn="_layout_1k0ru_1",Fn="_top_1k0ru_5",An="_middle_1k0ru_8",En="_left_1k0ru_13",$n="_right_1k0ru_16",In="_bottom_1k0ru_35";var W={layout:xn,top:Fn,middle:An,left:En,right:$n,bottom:In};function Dn({children:e}){return m("div",{className:W.layout,children:[d("div",{className:W.top,children:d(ns,{})}),m("div",{className:W.middle,children:[d("div",{className:W.left,children:d(Rs,{})}),d("div",{className:W.right,children:e})]}),d("div",{className:W.bottom,children:d(Bs,{})})]})}var Bn=p.exports.memo(Dn),kn={"collect-song":"_collect-song_4xve9_1"};const sa=e=>T(`/playlist/detail?id=${e}`),aa=e=>T(`/comment/playlist?id=${e}`),dt=(e,n,t)=>T(`/playlist/tracks?op=${e}&pid=${n}&tracks=${t}`),ra=e=>T(`/playlist/delete?id=${e}`),Tn=e=>T(`/user/playlist?uid=${e}`);function Mn({id:e}){const[n,t]=p.exports.useState(null),[i,s]=p.exports.useState(null),[o,l]=p.exports.useState(!1),a=window.localStorage.getItem("userid");if(!a)return d("div",{children:"\u672A\u627E\u5230 userid\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55"});const c=()=>{!i||(l(!0),dt("add",i,e).then(()=>{Se.destroyAll(),je.success("\u5DF2\u6536\u85CF\u6B4C\u66F2")}))};return p.exports.useEffect(()=>{(async()=>{const u=await Tn(a),h=u.playlist.filter(({subscribed:y})=>!y),g=u.playlist.filter(({subscribed:y})=>y),N=[{title:`\u6211\u521B\u5EFA\u7684\u6B4C\u5355 (${h.length})`,value:"0-0",selectable:!1,children:h.map(({name:y,id:_})=>({title:y,value:_}))},{title:`\u6211\u6536\u85CF\u7684\u6B4C\u5355 (${g.length})`,value:"0-1",selectable:!1,children:g.map(({name:y,id:_})=>({title:y,value:_}))}];t(N)})()},[]),n?m("div",{className:kn["collect-song"],children:[d(jt,{treeData:n,style:{width:"100%"},onChange:r=>s(r),treeDefaultExpandAll:!0,placeholder:"\u8BF7\u9009\u62E9\u6B4C\u5355"}),d(Qe,{onClick:c,type:"primary",loading:o,style:{marginTop:30},children:"\u786E\u8BA4"})]}):d(qe,{})}var Pn={"comment-list":"_comment-list_1pjhk_1"};function Ln({data:e}){const{hotComments:n,comments:t,total:i}=e,s=(o,l)=>m(Ne,{children:[d("div",{className:"sub-title",children:o}),l.map(({beReplied:a,content:c,user:r,time:u,likedCount:h},g)=>m("div",{className:"comment",children:[d("div",{className:"image",children:d("img",{src:`${H(r.avatarUrl)}?param=50y50`,loading:"lazy"})}),m("div",{className:"container",children:[m("div",{className:"content",children:[m("span",{children:[m(k,{to:`User?id=${r.userId}`,children:[r.nickname,"\uFF1A"]}),c]}),a[0]&&d("div",{className:"reply",children:m("span",{children:[m(k,{to:`User?id=${a[0].user.userId}`,children:[a[0].user.nickname,"\uFF1A"]}),a[0].content]})})]}),m("div",{className:"footer",children:[d("span",{className:"date",children:mn(u)}),m("span",{className:"like",children:[d(zt,{style:{color:"#1890ff"}}),"(",h,")"]})]})]})]},g))]});return m("div",{className:Pn["comment-list"],children:[m("div",{className:"title",children:["\u8BC4\u8BBA\u5217\u8868",m("span",{className:"total",children:["\u5171 ",i," \u6761"]})]}),n.length>0&&s("\u7CBE\u5F69\u8BC4\u8BBA",n),t.length>0&&s("\u6700\u65B0\u8BC4\u8BBA",t)]})}var ia=p.exports.memo(Ln);const On=Ut({scriptUrl:"//at.alicdn.com/t/font_2138442_yp24oyx9jzn.js"});function ht(e){return d(On,O({},e))}const Rn="_detail_1jp2c_2";var oa={detail:Rn};const jn="_header_o9m17_1";var zn={header:jn};function G(e,n){var t=(e&65535)+(n&65535),i=(e>>16)+(n>>16)+(t>>16);return i<<16|t&65535}function Un(e,n){return e<<n|e>>>32-n}function Ee(e,n,t,i,s,o){return G(Un(G(G(n,e),G(i,o)),s),t)}function E(e,n,t,i,s,o,l){return Ee(n&t|~n&i,e,n,s,o,l)}function $(e,n,t,i,s,o,l){return Ee(n&i|t&~i,e,n,s,o,l)}function I(e,n,t,i,s,o,l){return Ee(n^t^i,e,n,s,o,l)}function D(e,n,t,i,s,o,l){return Ee(t^(n|~i),e,n,s,o,l)}function $e(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var t,i,s,o,l,a=1732584193,c=-271733879,r=-1732584194,u=271733878;for(t=0;t<e.length;t+=16)i=a,s=c,o=r,l=u,a=E(a,c,r,u,e[t],7,-680876936),u=E(u,a,c,r,e[t+1],12,-389564586),r=E(r,u,a,c,e[t+2],17,606105819),c=E(c,r,u,a,e[t+3],22,-1044525330),a=E(a,c,r,u,e[t+4],7,-176418897),u=E(u,a,c,r,e[t+5],12,1200080426),r=E(r,u,a,c,e[t+6],17,-1473231341),c=E(c,r,u,a,e[t+7],22,-45705983),a=E(a,c,r,u,e[t+8],7,1770035416),u=E(u,a,c,r,e[t+9],12,-1958414417),r=E(r,u,a,c,e[t+10],17,-42063),c=E(c,r,u,a,e[t+11],22,-1990404162),a=E(a,c,r,u,e[t+12],7,1804603682),u=E(u,a,c,r,e[t+13],12,-40341101),r=E(r,u,a,c,e[t+14],17,-1502002290),c=E(c,r,u,a,e[t+15],22,1236535329),a=$(a,c,r,u,e[t+1],5,-165796510),u=$(u,a,c,r,e[t+6],9,-1069501632),r=$(r,u,a,c,e[t+11],14,643717713),c=$(c,r,u,a,e[t],20,-373897302),a=$(a,c,r,u,e[t+5],5,-701558691),u=$(u,a,c,r,e[t+10],9,38016083),r=$(r,u,a,c,e[t+15],14,-660478335),c=$(c,r,u,a,e[t+4],20,-405537848),a=$(a,c,r,u,e[t+9],5,568446438),u=$(u,a,c,r,e[t+14],9,-1019803690),r=$(r,u,a,c,e[t+3],14,-187363961),c=$(c,r,u,a,e[t+8],20,1163531501),a=$(a,c,r,u,e[t+13],5,-1444681467),u=$(u,a,c,r,e[t+2],9,-51403784),r=$(r,u,a,c,e[t+7],14,1735328473),c=$(c,r,u,a,e[t+12],20,-1926607734),a=I(a,c,r,u,e[t+5],4,-378558),u=I(u,a,c,r,e[t+8],11,-2022574463),r=I(r,u,a,c,e[t+11],16,1839030562),c=I(c,r,u,a,e[t+14],23,-35309556),a=I(a,c,r,u,e[t+1],4,-1530992060),u=I(u,a,c,r,e[t+4],11,1272893353),r=I(r,u,a,c,e[t+7],16,-155497632),c=I(c,r,u,a,e[t+10],23,-1094730640),a=I(a,c,r,u,e[t+13],4,681279174),u=I(u,a,c,r,e[t],11,-358537222),r=I(r,u,a,c,e[t+3],16,-722521979),c=I(c,r,u,a,e[t+6],23,76029189),a=I(a,c,r,u,e[t+9],4,-640364487),u=I(u,a,c,r,e[t+12],11,-421815835),r=I(r,u,a,c,e[t+15],16,530742520),c=I(c,r,u,a,e[t+2],23,-995338651),a=D(a,c,r,u,e[t],6,-198630844),u=D(u,a,c,r,e[t+7],10,1126891415),r=D(r,u,a,c,e[t+14],15,-1416354905),c=D(c,r,u,a,e[t+5],21,-57434055),a=D(a,c,r,u,e[t+12],6,1700485571),u=D(u,a,c,r,e[t+3],10,-1894986606),r=D(r,u,a,c,e[t+10],15,-1051523),c=D(c,r,u,a,e[t+1],21,-2054922799),a=D(a,c,r,u,e[t+8],6,1873313359),u=D(u,a,c,r,e[t+15],10,-30611744),r=D(r,u,a,c,e[t+6],15,-1560198380),c=D(c,r,u,a,e[t+13],21,1309151649),a=D(a,c,r,u,e[t+4],6,-145523070),u=D(u,a,c,r,e[t+11],10,-1120210379),r=D(r,u,a,c,e[t+2],15,718787259),c=D(c,r,u,a,e[t+9],21,-343485551),a=G(a,i),c=G(c,s),r=G(r,o),u=G(u,l);return[a,c,r,u]}function mt(e){var n,t="",i=e.length*32;for(n=0;n<i;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function We(e){var n,t=[];for(t[(e.length>>2)-1]=void 0,n=0;n<t.length;n+=1)t[n]=0;var i=e.length*8;for(n=0;n<i;n+=8)t[n>>5]|=(e.charCodeAt(n/8)&255)<<n%32;return t}function Vn(e){return mt($e(We(e),e.length*8))}function Hn(e,n){var t,i=We(e),s=[],o=[],l;for(s[15]=o[15]=void 0,i.length>16&&(i=$e(i,e.length*8)),t=0;t<16;t+=1)s[t]=i[t]^909522486,o[t]=i[t]^1549556828;return l=$e(s.concat(We(n)),512+n.length*8),mt($e(o.concat(l),512+128))}function pt(e){var n="0123456789abcdef",t="",i,s;for(s=0;s<e.length;s+=1)i=e.charCodeAt(s),t+=n.charAt(i>>>4&15)+n.charAt(i&15);return t}function Ge(e){return unescape(encodeURIComponent(e))}function ft(e){return Vn(Ge(e))}function qn(e){return pt(ft(e))}function gt(e,n){return Hn(Ge(e),Ge(n))}function Wn(e,n){return pt(gt(e,n))}function vt(e,n,t){return n?t?gt(n,e):Wn(n,e):t?ft(e):qn(e)}const Gn=(e,n)=>T(`/login?email=${e}&md5_password=${vt(n)}`,{method:"POST"}),Xn=(e,n)=>T(`/login/cellphone?phone=${e}&md5_password=${vt(n)}`,{method:"POST"}),Kn=()=>T("/logout"),Yn={labelCol:{span:4},wrapperCol:{span:20}},Zn={wrapperCol:{offset:18,span:4}};function Jn({onCancel:e,setUserInfo:n}){const[t,i]=p.exports.useState(!1),s=async o=>{const{username:l,password:a}=o;if(!l||!a)return;let c;if(/^[\w-.]+@[\w-.]+\.\w+$/.test(l))c="email";else if(/^1[3-9]\d{9}$/.test(l))c="phone";else return;if(t)return;i(!0);const r=c==="email"?await Gn(l,a):await Xn(l,a);window.localStorage.setItem("username",r.profile.nickname),window.localStorage.setItem("avatar",H(r.profile.avatarUrl)),window.localStorage.setItem("userid",r.account.id),window.localStorage.setItem("token",r.token);const u=Number(r.cookie.match(/MUSIC_U=\w+;\s?Max-Age=(\d+)/)[1]);window.localStorage.setItem("timestampBefore",String(Date.now()+u*1e3)),n({name:r.profile.nickname,avatar:H(r.profile.avatarUrl)}),e()};return d(Se,{title:"\u767B\u5F55",visible:!0,onCancel:e,footer:null,children:m(xe,q(O({},Yn),{onFinish:s,children:[d(xe.Item,{label:"\u8D26\u53F7",name:"username",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7"}],children:d(ze,{placeholder:"\u8F93\u5165\u624B\u673A\u53F7\u6216\u90AE\u7BB1"})}),d(xe.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],children:d(ze,{type:"password",placeholder:"\u8F93\u5165\u5BC6\u7801",autoComplete:"on"})}),d(xe.Item,q(O({},Zn),{children:d(Qe,{type:"primary",htmlType:"submit",loading:t,children:"\u767B\u5F55"})}))]}))})}const Qn=e=>T(`/search/suggest?keywords=${e}`),la=(e,n,t)=>T(`/search?keywords=${e}&type=${n}&offset=${t}`);function es(){const e=et(),[n,t]=p.exports.useState(""),[i,s]=p.exports.useState(!1),o=p.exports.useRef(null),[l,a]=p.exports.useState({}),c=p.exports.useCallback(pn(async r=>{const{result:u}=await Qn(r),h={};Array.isArray(u.songs)&&(h.songs=u.songs.map(g=>({path:`/Song?id=${g.id}`,text:`${g.name} - ${g.artists.map(N=>N.name).join("/")}`}))),Array.isArray(u.albums)&&(h.albums=u.albums.map(g=>({path:`/Album?id=${g.id}`,text:`${g.name} - ${g.artist.name}`}))),Array.isArray(u.artists)&&(h.singers=u.artists.map(g=>({path:`/Singer?id=${g.id}`,text:g.name}))),Array.isArray(u.playlists)&&(h.playlists=u.playlists.map(g=>({path:`/Playlist?id=${g.id}`,text:g.name}))),a(h)},800),[]);return p.exports.useEffect(()=>{n&&c(n)},[n]),m("div",{className:"search-container",children:[d(ze,{className:"search-input",placeholder:"\u641C\u7D22\u97F3\u4E50",suffix:d(tt,{}),ref:o,onFocus:()=>s(!0),onBlur:()=>setTimeout(s,100,!1),value:n,onChange:r=>t(r.target.value),onPressEnter:()=>{o.current&&o.current.blur(),e(`/Search?keyword=${n}`),t(""),a({})},style:{width:i?320:160}}),i&&m("div",{className:"search-suggest",children:[l.songs&&m("div",{children:[d("div",{className:"search-suggest-title",children:"\u5355\u66F2"}),d("div",{className:"search-suggest-list",children:l.songs.map(r=>d(k,{className:"search-suggest-item",to:r.path,children:r.text},r.path))})]}),l.albums&&m("div",{children:[d("div",{className:"search-suggest-title",children:"\u4E13\u8F91"}),d("div",{className:"search-suggest-list",children:l.albums.map(r=>d(k,{className:"search-suggest-item",to:r.path,children:r.text},r.path))})]}),l.singers&&m("div",{children:[d("div",{className:"search-suggest-title",children:"\u6B4C\u624B"}),d("div",{className:"search-suggest-list",children:l.singers.map(r=>d(k,{className:"search-suggest-item",to:r.path,children:r.text},r.path))})]}),l.playlists&&m("div",{children:[d("div",{className:"search-suggest-title",children:"\u6B4C\u5355"}),d("div",{className:"search-suggest-list",children:l.playlists.map(r=>d(k,{className:"search-suggest-item",to:r.path,children:r.text},r.path))})]})]})]})}function ts(){const[e,n]=p.exports.useState({name:null,avatar:null}),[t,i]=p.exports.useState(!1);p.exports.useEffect(()=>{if(hn()){const l=window.localStorage.getItem("username"),a=window.localStorage.getItem("avatar");l&&a&&n({name:l,avatar:a})}},[]);const s=()=>{e.name===null&&i(!t)},o=async()=>{(await Kn()).code===200&&(window.localStorage.clear(),n({name:null,avatar:null}))};return m("div",{className:zn.header,children:[d(Vt,{onClick:s,size:40,icon:d(Ht,{}),src:e.avatar?`${e.avatar}?param=80y80`:null}),d("div",{className:"username",children:e.name||"\u672A\u767B\u5F55"}),e.name&&d("div",{className:"logout",onClick:o,children:"\u9000\u51FA\u767B\u5F55"}),d(es,{}),t&&d(Jn,{onCancel:s,setUserInfo:n})]})}var ns=p.exports.memo(ts),ss={"link-image-list":"_link-image-list_cdedt_1"};function as({children:e}){return d("div",{className:ss["link-image-list"],children:e})}function rs({src:e,linkTo:n,text:t}){return m("div",{className:"item",children:[d(k,{to:n,className:"item-image",children:d("img",{src:`${e}?param=240y240`,loading:"lazy"})}),d(k,{to:n,className:"item-info",children:t})]})}as.Item=rs;var is={"music-player":"_music-player_1eudp_1"};const os="_container_ivqz9_1";var ls={container:os};function cs({playingItem:e,currentTime:n}){const{id:t,name:i,cover:s,singers:o,duration:l}=e,a=p.exports.useMemo(()=>o.map(({name:r})=>r).join("/"),[o]),c=`${ae(n)} / ${ae(l)}`;return m("div",{className:ls.container,children:[d("img",{src:`${s}?param=50y50`}),m("div",{className:"information",children:[m("div",{className:"song",children:[d(k,{to:`/Song?id=${t}`,children:i}),"\xA0-\xA0",d("span",{className:"singer",title:a,children:a})]}),d("div",{className:"time",children:c})]})]})}const us="_container_13n9u_1";var ds={container:us};function hs(){const{getSong:e,playSong:n,pauseSong:t}=p.exports.useContext(ie),i=p.exports.useContext(Ie),{isPlaying:s,playingItem:o}=i,l=c=>{const r=e(c,i);n(r)},a=()=>{s?t():n(o)};return m("div",{className:ds.container,children:[d("div",{className:"prev",title:"\u4E0A\u4E00\u9996",onClick:()=>l("prev"),children:d(qt,{})}),d("div",{className:"play-or-pause",onClick:a,title:"\u64AD\u653E/\u6682\u505C",children:s?d(Wt,{}):d(Ue,{})}),d("div",{className:"next",title:"\u4E0B\u4E00\u9996",onClick:()=>l("next"),children:d(Gt,{})})]})}var ms=p.exports.memo(hs),ps={"other-button":"_other-button_1huph_1"};const fs="_playlist_sthgb_1";var gs={playlist:fs};function vs({isPlaying:e,playlist:n,playingItem:t,currentTime:i}){const{playSong:s,collectSong:o,setPlaylist:l}=p.exports.useContext(ie),[a,c]=p.exports.useState(t.lyric),r=p.exports.useRef(null),u=p.exports.useRef(null),h=p.exports.useRef(null),g=p.exports.useRef(t.id),N=()=>{Fe().delAll(),l([])},y=async C=>{const f=n[C];s(f)},_=(C,f,v)=>{C.stopPropagation(),R().download(f,v)},w=async(C,f)=>{C.stopPropagation();const v=n.slice(),b=v.findIndex(S=>S.id===t.id),x=v.splice(f,1);if(Fe().del(x[0].id),l(v),b===f&&e){const S=v[f]||v[v.length-1];S&&s(S)}},F=(C,f)=>{C.stopPropagation(),o(f)};return rt(()=>{if(!toggleList.checked)return;const C=u.current.getElementsByClassName("lyric");if(C.length===0)return;const f=()=>{let A=0,B=C.length-1;for(;A<=B;){const M=A+B>>1,P=Number(C[M].dataset.time);i<P?B=M-1:A=M+1}return A-1};let v;const b=Number(C[0].dataset.time),x=Number(C[C.length-1].dataset.time);if(i>=x)v=C[C.length-1];else{if(i<=b)return;{const A=f();v=C[A]}}if(h.current===v)return;h.current&&h.current.classList.remove("active"),h.current=v,v.classList.add("active");const S=h.current.offsetTop+h.current.scrollHeight/2-195;u.current.scrollTop=S<0?0:S},400),p.exports.useEffect(()=>{t.id!==g.current?(h.current&&h.current.classList.remove("active"),u.current.scrollTop=0,g.current=t.id,c(t.lyric)):t.lyric&&c(t.lyric)},[t]),p.exports.useEffect(()=>{if(r.current){const C=r.current.getContext("2d");R().setCanvasContext(C),R().drawStart()}},[r]),m("div",{className:gs.playlist,children:[d("div",{className:"icon",title:"\u64AD\u653E\u5217\u8868",children:m("label",{htmlFor:"toggleList",children:[d(Xt,{}),n.length]})}),d("input",{type:"checkbox",id:"toggleList",className:"toggle"}),m("div",{className:"list",children:[d("canvas",{ref:r,height:"310",width:"900"}),m("div",{className:"list-left",children:[m("div",{className:"title",children:[m("span",{children:["\u64AD\u653E\u5217\u8868 (",n.length,")"]}),m("span",{className:"clean",onClick:N,children:[d(Ve,{})," \u6E05\u7A7A"]})]}),d("div",{className:"content",children:n.map(({id:C,name:f,singers:v,duration:b},x)=>m("div",{className:C===t.id?"item playing":"item",onClick:()=>y(x),children:[C===t.id&&d(Ue,{}),d("div",{className:"song-title",title:f,children:f}),m("div",{className:"icons",children:[d(nt,{title:"\u6DFB\u52A0\u5230\u6B4C\u5355",onClick:S=>F(S,C)}),d(st,{title:"\u4E0B\u8F7D",onClick:S=>_(S,C,f)}),d(Ve,{title:"\u5220\u9664",onClick:S=>w(S,x)})]}),d("div",{className:"singer",title:v.map(({name:S})=>S).join("/"),children:v.map(({name:S})=>S).join("/")}),d("div",{className:"duration",children:ae(b)})]},C))})]}),m("div",{className:"list-right",children:[d("div",{className:"title",children:d("span",{title:t.name,children:t.name})}),m("div",{className:"content",ref:u,children:[a===null&&d("p",{children:"\u6B4C\u8BCD\u52A0\u8F7D\u4E2D..."}),a&&a.length===0&&d("p",{children:"\u6682\u65E0\u6B4C\u8BCD"}),a&&a.map(([C,f,v],b)=>m("p",{"data-time":v,className:"lyric",children:[C,f&&m(Ne,{children:[d("br",{}),f]})]},b))]})]}),d("label",{htmlFor:"toggleList",children:d("div",{className:"close",children:"X"})})]})]})}var ys={"play-mode":"_play-mode_txlgz_1"};const _s={"list-loop":d(Kt,{title:"\u5217\u8868\u5FAA\u73AF"}),random:d(ht,{type:"icon-random",title:"\u968F\u673A"}),"single-cycle":d(ht,{type:"icon-Singlecycle",title:"\u5355\u66F2\u5FAA\u73AF"})};function Cs({playMode:e}){const{setPlayMode:n}=p.exports.useContext(ie),t=()=>{let s;e==="list-loop"?s="random":e==="random"?s="single-cycle":s="list-loop",n(s)},i=_s[e];return d("div",{className:ys["play-mode"],children:d("div",{className:"icon",onClick:t,children:i})})}var bs=p.exports.memo(Cs);const ws="_volume_jlvx2_1";var Ss={volume:ws};function Ns(){const e=n=>{R().setVolume(n*.01)};return m("div",{className:Ss.volume,children:[d("div",{className:"icon",title:"\u97F3\u91CF",children:d(Yt,{})}),d("div",{className:"slider",children:d(Zt,{defaultValue:100,onChange:e,tipFormatter:n=>`${n}%`})})]})}var xs=p.exports.memo(Ns);function Fs({isPlaying:e,playingItem:n,playlist:t,playMode:i,currentTime:s}){return m("div",{className:ps["other-button"],children:[d(vs,{isPlaying:e,playingItem:n,playlist:t,currentTime:s}),d(bs,{playMode:i}),d(xs,{})]})}const As="_progressbar_gqgv7_1";var Es={progressbar:As};function $s({playingItem:e,currentTime:n,setCurrentTime:t}){const{duration:i}=e,[s,o]=p.exports.useState(!1),l=p.exports.useRef(null),a=p.exports.useRef(null),{playSong:c}=p.exports.useContext(ie),r=N=>{if(N.button!==0)return;window.addEventListener("mousemove",h),window.addEventListener("mouseup",u),o(!0);const y=window.innerWidth<1e3?1e3:window.innerWidth,_=N.clientX/y;l.current.style.width=`${_*100}%`,a.current.textContent=ae(_*i)},u=N=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",u),o(!1);const y=window.innerWidth<1e3?1e3:window.innerWidth;let w=N.clientX/y*i;w<0?w=0:w>i&&(w=i),t(w),c(e,w)},h=N=>{const y=window.innerWidth<1e3?1e3:window.innerWidth;let _=N.clientX/y;_>1?_=1:_<0&&(_=0),l.current.style.width=`${_*100}%`,a.current.textContent=ae(_*i)},g=p.exports.useMemo(()=>s?{width:l.current.style.width}:{width:`${n/i*100}%`},[n,i]);return m("div",{className:Es.progressbar,children:[d("div",{className:"track",onMouseDown:r}),m("div",{className:"rail",onMouseDown:r,ref:l,style:g,children:[d("div",{className:"handle"}),d("div",{className:"tooltip",ref:a,style:{display:s?"block":"none"}})]})]})}var Is=p.exports.memo($s);function Ds(){const e=p.exports.useContext(Ie),[n,t]=p.exports.useState(0),{isPlaying:i,playMode:s,playlist:o,playingItem:l}=e;return rt(()=>{const a=R().getCurrentTime();t(a)},300),m("div",{className:is["music-player"],children:[d(cs,{playingItem:l,currentTime:n}),d(ms,{}),d(Fs,{isPlaying:i,playingItem:l,playlist:o,playMode:s,currentTime:n}),d(Is,{playingItem:l,currentTime:n,setCurrentTime:t})]})}var Bs=p.exports.memo(Ds);const ks="_pagination_vr65g_1";var Ts={pagination:ks};function Ms({currentPage:e,total:n,pageSize:t,onChange:i}){const s=Math.ceil(n/t);if(s<=1)return null;const o=l=>{if(l==="prev"&&e>1){const a=document.getElementsByClassName(W.right)[0];a.scrollTop=0,i(e-1)}else if(l==="next"&&e<s){const a=document.getElementsByClassName(W.right)[0];a.scrollTop=0,i(e+1)}};return m("div",{className:Ts.pagination,children:[d("div",{className:"page-btn",onClick:()=>o("prev"),children:"<"}),d("div",{className:"page",children:e}),d("div",{className:"page-btn",onClick:()=>o("next"),children:">"})]})}const Ps="_container_r0gt6_1";var Ls={container:Ps};function Os(){const[e,n]=p.exports.useState("Discovery"),{pathname:t}=Re();return p.exports.useEffect(()=>{n(t.slice(1))},[t]),m("div",{className:Ls.container,children:[d("input",{type:"checkbox",id:"toggle",className:"input-toggle"}),m("div",{className:"sidebar",children:[d("div",{className:"category",children:"\u63A8\u8350"}),[{text:"\u53D1\u73B0\u97F3\u4E50",Icon:tt,key:"Discovery"},{text:"\u79C1\u4EBAFM",Icon:Jt,key:"PersonalFM"}].map(({key:i,text:s,Icon:o})=>m(k,{className:e===i?"item active":"item",to:`/${i}`,children:[d(o,{})," ",s]},i)),d("div",{className:"category",children:"\u6211\u7684\u97F3\u4E50"}),[{text:"\u6211\u7684\u6B4C\u5355",Icon:at,key:"MySongList"}].map(({key:i,text:s,Icon:o})=>m(k,{className:e===i?"item active":"item",to:`/${i}`,children:[d(o,{})," ",s]},i)),d("div",{className:"category",children:"GitHub"}),m("a",{className:"item",href:"https://github.com/lisianthus-a/react-music",target:"_blank",children:[d(Qt,{})," \u9879\u76EE\u5730\u5740"]}),m("a",{className:"item",href:"https://binaryify.github.io/NeteaseCloudMusicApi/#/?id=neteasecloudmusicapi",target:"_blank",children:[d(en,{})," API\u6587\u6863"]})]}),d("label",{htmlFor:"toggle",children:d("div",{className:"toggle"})})]})}var Rs=p.exports.memo(Os);const js="_songlist_1x4kn_1";var yt={songlist:js};function zs({songList:e,songIds:n,isCreator:t}){const i=p.exports.useContext(Ie),{playSong:s,collectSong:o,setPlaylist:l}=p.exports.useContext(ie),a=rn("id"),{playingItem:c,playlist:r}=i,[u,h]=p.exports.useState(e||[]),[g,N]=p.exports.useState(1),y=f=>{if(r.find(b=>b.id===f.id))return;const v=r.slice();v.push(f),l(v)},_=f=>{const{id:v,name:b}=f;R().download(v,b)},w=f=>{if(s(f),r.find(b=>b.id===f.id))return;const v=r.slice();v.push(f),l(v)},F=f=>{o(f)},C=f=>{Se.confirm({title:"\u5220\u9664\u6B4C\u66F2",content:`\u662F\u5426\u8981\u5220\u9664\u6B4C\u66F2 ${f.name} \uFF1F`,okText:"\u662F",cancelText:"\u5426",async onOk(){await dt("del",a,f.id),je.success("\u5DF2\u5220\u9664");const v=u.slice(),b=u.findIndex(x=>x.id===f.id);v.splice(b,1),h(v)}})};return p.exports.useEffect(()=>{n&&(async()=>{h([]);const v=(g-1)*50,b=n.slice(v,v+50),x=await it(b);h(ot(x.songs,"detail"))})()},[n,g]),u.length===0?d(qe,{}):m("div",{className:yt.songlist,children:[m("div",{className:"title",children:["\u6B4C\u66F2\u5217\u8868",m("span",{children:[(e||n).length,"\u9996\u6B4C"]})]}),m("table",{children:[d("thead",{children:m("tr",{children:[d("th",{scope:"col"}),d("th",{scope:"col",children:"\u6B4C\u66F2\u6807\u9898"}),d("th",{scope:"col",children:"\u65F6\u957F"}),d("th",{scope:"col",children:"\u6B4C\u624B"}),d("th",{scope:"col",children:"\u4E13\u8F91"})]})}),d("tbody",{children:u.map((f,v)=>{const{id:b,name:x,singers:S,duration:A,isFree:B,albumId:M,albumName:P}=f;return m("tr",{className:B?void 0:"fee",children:[m("td",{children:[d("span",{children:(g-1)*50+v+1}),d(Ue,{className:c.id===b?"play-btn-playing":"play-btn",onClick:()=>w(f)})]}),m("td",{children:[d(k,{to:`/Song?id=${b}`,title:x,children:x}),m("div",{className:"icons",children:[B&&m(Ne,{children:[d(nt,{title:"\u6DFB\u52A0\u5230\u64AD\u653E\u5217\u8868",onClick:()=>y(f)}),d(at,{title:"\u6536\u85CF\u5230\u6B4C\u5355",onClick:()=>F(b)}),d(st,{title:"\u4E0B\u8F7D",onClick:()=>_(f)})]}),t&&d(Ve,{title:"\u5220\u9664",onClick:()=>C(f)})]})]}),d("td",{children:ae(A)}),d("td",{children:S.map(({id:V,name:j},z)=>m(p.exports.Fragment,{children:[d(k,{to:`/Singer?id=${V}`,title:j,className:yt.singer,children:j}),z!==S.length-1&&d("span",{children:" / "})]},z))}),d("td",{children:d(k,{to:`/Album?id=${M}`,title:P,children:P})})]},b)})})]}),d(Ms,{currentPage:g,total:(n==null?void 0:n.length)||0,pageSize:50,onChange:N})]})}var ca=p.exports.memo(zs);const Us="_tabs_1cb5f_1",Vs="_tab_1cb5f_1";var Xe={tabs:Us,tab:Vs,"tab-active":"_tab-active_1cb5f_9"};function Hs({children:e,onChange:n}){const t=p.exports.useMemo(()=>{const o=[];return be.Children.forEach(e,l=>{be.isValidElement(l)&&o.push({key:l.key,text:l.props.text,element:l})}),o},[e]),[i,s]=p.exports.useState(t[0].key);return m(Ne,{children:[d("div",{className:Xe.tabs,children:t.map(({key:o,text:l})=>d("div",{className:i===o?Xe["tab-active"]:Xe.tab,onClick:()=>{s(o),n&&n(o)},children:l},o))}),t.filter(o=>o.key===i)[0].element]})}function qs(e){return e.children}Hs.Pane=qs;const Ws="modulepreload",_t={},Gs="/",U=function(n,t){return!t||t.length===0?n():Promise.all(t.map(i=>{if(i=`${Gs}${i}`,i in _t)return;_t[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":Ws,s||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),s)return new Promise((a,c)=>{l.addEventListener("load",a),l.addEventListener("error",c)})})).then(()=>n())};var Xs=[{path:"/Album",component:()=>U(()=>import("./index.43c8319b.js"),["assets/index.43c8319b.js","assets/index.88dbd4ba.css","assets/vendor.47a03c39.js","assets/index.143bf981.js"])},{path:"/Discovery",component:()=>U(()=>import("./index.cb8b0577.js"),["assets/index.cb8b0577.js","assets/index.218aba9a.css","assets/vendor.47a03c39.js"])},{path:"/MySongList",component:()=>U(()=>import("./index.f39964f7.js"),["assets/index.f39964f7.js","assets/index.72357c03.css","assets/vendor.47a03c39.js"])},{path:"/PersonalFM",component:()=>U(()=>import("./index.83f8147f.js"),["assets/index.83f8147f.js","assets/index.bd36bfc0.css","assets/vendor.47a03c39.js"])},{path:"/Playlist",component:()=>U(()=>import("./index.a7614fbd.js"),["assets/index.a7614fbd.js","assets/index.51c499bb.css","assets/vendor.47a03c39.js","assets/index.143bf981.js"])},{path:"/Search",component:()=>U(()=>import("./index.37a4427a.js"),["assets/index.37a4427a.js","assets/index.8a5e2951.css","assets/vendor.47a03c39.js"])},{path:"/Singer",component:()=>U(()=>import("./index.7589ea43.js"),["assets/index.7589ea43.js","assets/index.42fb7331.css","assets/vendor.47a03c39.js"])},{path:"/Song",component:()=>U(()=>import("./index.70ff8064.js"),["assets/index.70ff8064.js","assets/index.fb0015a2.css","assets/vendor.47a03c39.js","assets/index.143bf981.js"])},{path:"/User",component:()=>U(()=>import("./index.070cb32f.js"),["assets/index.070cb32f.js","assets/vendor.47a03c39.js"])},{path:"/Video",component:()=>U(()=>import("./index.b9c248b7.js"),["assets/index.b9c248b7.js","assets/vendor.47a03c39.js"])}];const Ct={};Xs.forEach(e=>{const{path:n}=e;Ct[n]=e});function Ks(){const e=et(),n=Re(),[t,i]=p.exports.useState(null);return p.exports.useEffect(()=>{const{pathname:s}=n,o=Ct[s]||null;if(o){i(p.exports.lazy(o.component));return}e("/Discovery")},[n]),t?d(p.exports.Suspense,{fallback:d(qe,{}),children:d(t,{})}):null}const bt={id:776039,name:"ONE's hope",singers:[{id:18303,name:"\u3084\u306A\u304E\u306A\u304E"}],duration:369.72,cover:"https://p1.music.126.net/l22TRH7bs4VG6HMT2Iy56w==/2511284557902801.jpg",isFree:!0,albumId:76484,albumName:"Colorful Parade"},wt={isPlaying:!1,playlist:[bt],playMode:"list-loop",playingItem:q(O({},bt),{lyric:null})},Ie=be.createContext(wt),ie=be.createContext(null),St=document.getElementById("audio");function Ys(){const[e,n]=an(wt),t=p.exports.useMemo(()=>({getSong:(r,u)=>{const{playlist:h,playingItem:g,playMode:N}=u,y=h.length;if(y<=1||N==="single-cycle")return g;const _=h.findIndex(({id:F})=>F===g.id);let w;switch(N){case"list-loop":w=r==="next"?(_+1)%y:(y+_-1)%y;break;case"random":w=Math.random()*y>>0,w===_&&(w=(_+1)%y)}return h[w]},playSong:(r,u)=>{const{id:h}=r;n({isPlaying:!0,playingItem:q(O({},r),{lyric:null})}),R().play(h,u).then(g=>{g?(St.play(),n({playingItem:R().getPlayingItem()})):je.error(`\u52A0\u8F7D\u6B4C\u66F2\u5931\u8D25\uFF0Cid:${h}`)})},collectSong:r=>{Se.info({title:"\u6536\u85CF\u6B4C\u66F2",maskClosable:!0,okButtonProps:{style:{display:"none"}},width:500,content:d(Mn,{id:r})})},pauseSong:()=>{St.pause(),R().pause(),n({isPlaying:!1})},setPlaylist:r=>{n({playlist:r})},setPlayMode:r=>{n({playMode:r})}}),[]);return p.exports.useEffect(()=>{if(!navigator.mediaSession||!MediaMetadata||!e.playingItem)return;const{name:i,singers:s,cover:o,albumName:l}=e.playingItem;navigator.mediaSession.metadata=new MediaMetadata({title:i,artist:s.map(a=>a.name).join("/"),album:l,artwork:[{src:`${o}?param=96y96`,sizes:"96x96",type:"image/jpeg"},{src:`${o}?param=128y128`,sizes:"128x128",type:"image/jpeg"},{src:`${o}?param=192y192`,sizes:"192x192",type:"image/jpeg"},{src:`${o}?param=256y256`,sizes:"256x256",type:"image/jpeg"},{src:`${o}?param=384y384`,sizes:"384x384",type:"image/jpeg"},{src:`${o}?param=512y512`,sizes:"512x512",type:"image/jpeg"}]})},[e]),p.exports.useEffect(()=>{!navigator.mediaSession||!MediaMetadata||(navigator.mediaSession.setActionHandler("play",()=>{const{playingItem:i}=e;t.playSong(i)}),navigator.mediaSession.setActionHandler("pause",()=>{t.pauseSong()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{const i=t.getSong("prev",e);t.playSong(i)}),navigator.mediaSession.setActionHandler("nexttrack",()=>{const i=t.getSong("next",e);t.playSong(i)}))},[e]),p.exports.useEffect(()=>{R().setOnEnded(()=>{const{getSong:i,playSong:s}=t,o=i("next",e);s(o)})},[e]),d(ie.Provider,{value:t,children:d(Ie.Provider,{value:e,children:d(Bn,{children:d(Ks,{})})})})}const Zs="/";function Js(){return d(tn,{basename:Zs,children:d(Ys,{})})}nn.render(d(be.StrictMode,{children:d(Js,{})}),document.getElementById("root"));export{ia as C,ie as F,qe as L,Ms as P,ca as S,Hs as T,T as a,ot as b,Fe as c,Ie as d,oa as e,rt as f,H as g,pn as h,hn as i,ra as j,Tn as k,W as l,R as m,ae as n,aa as o,sa as p,as as q,na as r,it as s,an as t,rn as u,la as v,dn as w,gn as x,ta as y};
