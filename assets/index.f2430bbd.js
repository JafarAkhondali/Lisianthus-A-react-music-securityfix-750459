import{j as e,b as y,L as P,l as C,r as j}from"./vendor.fb93b9f7.js";import{T as f}from"./index.cab4daa5.js";import{S as w,P as I}from"./index.ba2972c4.js";import{L as v,u as B,q as N,t as U,b as _,d as b}from"./index.39ed000d.js";const F="_view_i5per_1";var T={view:F},$={"link-image-list":"_link-image-list_cdedt_1"};function c({children:a}){return e("div",{className:$["link-image-list"],children:a})}function D({src:a,linkTo:t,text:n}){return y("div",{className:"item",children:[e(P,{to:t,className:"item-image",children:e("img",{src:`${a}?param=240y240`,loading:"lazy"})}),e(P,{to:t,className:"item-info",children:n})]})}c.Item=D;function z({data:a}){return e(c,{children:a.map(({id:t,name:n,singer:s,picUrl:i})=>{const h=y(C,{children:[e("div",{children:n}),e("div",{children:s.map(({name:o})=>o).join(" / ")})]});return e(c.Item,{linkTo:`/Album?id=${t}`,src:i,text:h},t)})})}function A({data:a}){return e(c,{children:a.map(({id:t,name:n,picUrl:s})=>e(c.Item,{linkTo:`/Singer?id=${t}`,src:s,text:n},t))})}function E({data:a}){return e(c,{children:a.map(({id:t,name:n,picUrl:s})=>e(c.Item,{linkTo:`/Playlist?id=${t}`,src:s,text:n},t))})}function H({pageState:a,setPageState:t}){const{loading:n,data:s,currentPage:i,total:h}=a;return y("div",{className:T.view,children:[y(f,{onChange:o=>{t({type:o,loading:!0,currentPage:1})},children:[e(f.Pane,{text:"\u5355\u66F2",children:n?e(v,{}):e(w,{songList:s})},"song"),e(f.Pane,{text:"\u4E13\u8F91",children:n?e(v,{}):e(z,{data:s})},"album"),e(f.Pane,{text:"\u6B4C\u624B",children:n?e(v,{}):e(A,{data:s})},"singer"),e(f.Pane,{text:"\u6B4C\u5355",children:n?e(v,{}):e(E,{data:s})},"playlist")]}),e(I,{currentPage:i,total:h,pageSize:30,onChange:o=>{t({currentPage:o})}})]})}const q={currentPage:1,total:0,type:"song",loading:!0,data:[]},M={song:"1",album:"10",singer:"100",playlist:"1000"};function K(){const a=B("keyword");if(!a)return e("div",{children:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9"});const[t,n]=N(q);return j.exports.useEffect(()=>{const{currentPage:s,type:i}=t;n({loading:!0}),(async()=>{const o=(s-1)*30,r=await U(a,M[i],o);let u=[],d=0;i==="song"?(u=_(r.result.songs,"search"),d=r.result.songCount):i==="album"?(u=r.result.albums.map(l=>{const{id:m,name:g,artists:p}=l,x=b(l.picUrl),L=p.map(({id:S,name:k})=>({id:S,name:k}));return{id:m,name:g,picUrl:x,singer:L}}),d=r.result.albumCount):i==="singer"?(u=r.result.artists.map(l=>{const{id:m,name:g}=l,p=b(l.picUrl);return{id:m,name:g,picUrl:p}}),d=r.result.artistCount):i==="playlist"&&(u=r.result.playlists.map(l=>{const{id:m,name:g,description:p}=l,x=b(l.coverImgUrl);return{id:m,name:g,picUrl:x,description:p}}),d=r.result.playlistCount),n({loading:!1,total:d,data:u})})()},[a,t.currentPage,t.type]),e(H,{pageState:t,setPageState:n})}export{K as default};
