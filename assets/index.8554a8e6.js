import{b as t,j as v,F as L,r as w}from"./vendor.47a03c39.js";import{q as u,T as f,L as y,S as j,P as k,u as B,t as F,v as T,b as U,g as x}from"./index.1f299675.js";const I="_view_i5per_1";var D={view:I};function _({data:a}){return t(u,{children:a.map(({id:e,name:n,singer:s,picUrl:r})=>{const h=v(L,{children:[t("div",{children:n}),t("div",{children:s.map(({name:o})=>o).join(" / ")})]});return t(u.Item,{linkTo:`/Album?id=${e}`,src:r,text:h},e)})})}function $({data:a}){return t(u,{children:a.map(({id:e,name:n,picUrl:s})=>t(u.Item,{linkTo:`/Singer?id=${e}`,src:s,text:n},e))})}function A({data:a}){return t(u,{children:a.map(({id:e,name:n,picUrl:s})=>t(u.Item,{linkTo:`/Playlist?id=${e}`,src:s,text:n},e))})}function E({pageState:a,setPageState:e}){const{loading:n,data:s,currentPage:r,total:h}=a;return v("div",{className:D.view,children:[v(f,{onChange:o=>{e({type:o,loading:!0,currentPage:1})},children:[t(f.Pane,{text:"\u5355\u66F2",children:n?t(y,{}):t(j,{songList:s})},"song"),t(f.Pane,{text:"\u4E13\u8F91",children:n?t(y,{}):t(_,{data:s})},"album"),t(f.Pane,{text:"\u6B4C\u624B",children:n?t(y,{}):t($,{data:s})},"singer"),t(f.Pane,{text:"\u6B4C\u5355",children:n?t(y,{}):t(A,{data:s})},"playlist")]}),t(k,{currentPage:r,total:h,pageSize:30,onChange:o=>{e({currentPage:o})}})]})}const H={currentPage:1,total:0,type:"song",loading:!0,data:[]},N={song:"1",album:"10",singer:"100",playlist:"1000"};function M(){const a=B("keyword");if(!a)return t("div",{children:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9"});const[e,n]=F(H);return w.exports.useEffect(()=>{const{currentPage:s,type:r}=e;n({loading:!0}),(async()=>{const o=(s-1)*30,i=await T(a,N[r],o);let c=[],d=0;r==="song"?(c=U(i.result.songs,"search"),d=i.result.songCount):r==="album"?(c=i.result.albums.map(l=>{const{id:g,name:p,artists:m}=l,P=x(l.picUrl),S=m.map(({id:b,name:C})=>({id:b,name:C}));return{id:g,name:p,picUrl:P,singer:S}}),d=i.result.albumCount):r==="singer"?(c=i.result.artists.map(l=>{const{id:g,name:p}=l,m=x(l.picUrl);return{id:g,name:p,picUrl:m}}),d=i.result.artistCount):r==="playlist"&&(c=i.result.playlists.map(l=>{const{id:g,name:p,description:m}=l,P=x(l.coverImgUrl);return{id:g,name:p,picUrl:P,description:m}}),d=i.result.playlistCount),n({loading:!1,total:d,data:c})})()},[a,e.currentPage,e.type]),t(E,{pageState:e,setPageState:n})}export{M as default};
