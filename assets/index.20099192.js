import{r as v,b as i,l as F,j as e,L as N,B as C,f as k,H as E,k as L,v as P}from"./vendor.fb93b9f7.js";import{F as $,s as j,b as w,c as _,S as I,m as H,d as O,e as U}from"./index.39ed000d.js";const T="_detail_1jp2c_2";var z={detail:T};function M({detailData:d,songList:l,songIds:s}){const{setPlaylist:o,playSong:r}=v.exports.useContext($),{title:m,cover:u,creator:t,tags:p,description:h}=d,n=async()=>{let a=[];if(l)a=l.filter(c=>c.isFree);else if(s){const c=Math.ceil(s.length*.02);for(let y=0;y<c;++y){const f=y*50,B=s.slice(f,f+50),D=await j(B),x=w(D.songs,"detail").filter(b=>b.isFree);a=[...a,...x]}}_().delAll(),o(a),r(a[0])};return i(F,{children:[e("div",{className:"list-left",children:e("div",{className:"image",children:e("img",{src:`${u}?param=240y240`})})}),i("div",{className:"list-right",children:[e("div",{className:"title-playlist",children:m}),i("div",{className:"creator",children:[i(N,{to:`/User?id=${t.id}`,children:[e("img",{src:`${t.avatar}?param=40y40`}),t.name]}),new Date(t.createTime).toLocaleDateString().replace(/\//g,"-"),"\u521B\u5EFA"]}),e("div",{className:"btns",children:e(C,{icon:e(k,{}),onClick:n,children:"\u64AD\u653E\u5168\u90E8"})}),i("div",{className:"tags",children:["\u6807\u7B7E\uFF1A",p.map((a,c)=>e("span",{children:a},c))]}),e("div",{className:"description",children:h})]})]})}function q({detailData:d,songList:l}){const{playSong:s,setPlaylist:o}=v.exports.useContext($),{title:r,cover:m,singers:u,publishTime:t,description:p}=d,h=()=>{const n=l[0];s(n),o(l)};return i(F,{children:[e("div",{className:"list-left",children:e("div",{className:"image",children:e("img",{src:`${m}?param=240y240`})})}),i("div",{className:"list-right",children:[e("div",{className:"title-album",children:r}),i("div",{className:"singer",children:["\u6B4C\u624B\uFF1A",u.map(({id:n,name:a},c)=>i(v.exports.Fragment,{children:[e(N,{to:`/Singer?id=${n}`,children:a}),e("span",{children:" / "})]},c))]}),i("div",{children:["\u53D1\u884C\u65F6\u95F4\uFF1A",new Date(t).toLocaleDateString().replace(/\//g,"-")]}),e("div",{className:"btns",children:e(C,{icon:e(k,{}),onClick:h,children:"\u64AD\u653E\u5168\u90E8"})}),e("div",{className:"description",children:p})]})]})}function G({detailData:d,songData:l,lyric:s}){const{title:o,cover:r,singers:m,albumId:u,albumName:t}=d,{id:p,name:h,isFree:n}=l,{playSong:a,collectSong:c,setPlaylist:y}=v.exports.useContext($),{playingItem:f,playlist:B}=v.exports.useContext(I),D=()=>{if(f.id!==l.id){if(!B.find(g=>g.id===l.id)){const g=B.slice();g.push(l),y(g)}a(l)}},x=()=>{c(p)},b=()=>{H().download(p,h)};return i(F,{children:[e("div",{className:"list-left",children:e("div",{className:"image",children:e("img",{src:`${r}?param=240y240`})})}),i("div",{className:"list-right",children:[e("div",{className:"title-song",children:o}),i("div",{className:"singer",children:["\u6B4C\u624B\uFF1A",m.map(({id:g,name:A},S)=>i(v.exports.Fragment,{children:[e(N,{to:`/Singer?id=${g}`,children:A}),e("span",{children:" / "})]},S))]}),i("div",{children:["\u6240\u5C5E\u4E13\u8F91\uFF1A",e(N,{to:`/Album?id=${u}`,children:t})]}),i("div",{className:"btns",children:[e(C,{icon:e(k,{}),onClick:D,disabled:!n,children:"\u64AD\u653E"}),e(C,{icon:e(E,{}),onClick:x,disabled:!n,children:"\u6DFB\u52A0\u5230\u6B4C\u5355"}),e(C,{icon:e(L,{}),onClick:b,disabled:!n,children:"\u4E0B\u8F7D"})]}),e("input",{type:"checkbox",id:"toggle-lyric",className:"toggle",style:{display:"none"}}),s.length===0&&e("div",{children:"\u6682\u65E0\u6B4C\u8BCD"}),e("div",{className:"lyric",children:s.map(([g,A],S)=>i("p",{children:[g,A&&i(F,{children:[e("br",{}),A]})]},S))}),e("label",{htmlFor:"toggle-lyric"})]})]})}function W({data:d}){const{detail:l,songList:s,songIds:o,lyric:r}=d,{isPlaylist:m,isAlbum:u,isSong:t}=l;return i("div",{className:z.detail,children:[m&&e(M,{detailData:l,songList:s,songIds:o}),u&&e(q,{detailData:l,songList:s}),t&&e(G,{detailData:l,songData:s[0],lyric:r})]})}var J={"comment-list":"_comment-list_1pjhk_1"};function K({data:d}){const{hotComments:l,comments:s,total:o}=d,r=(m,u)=>i(F,{children:[e("div",{className:"sub-title",children:m}),u.map(({beReplied:t,content:p,user:h,time:n,likedCount:a},c)=>i("div",{className:"comment",children:[e("div",{className:"image",children:e("img",{src:`${O(h.avatarUrl)}?param=50y50`,loading:"lazy"})}),i("div",{className:"container",children:[i("div",{className:"content",children:[i("span",{children:[i(N,{to:`User?id=${h.userId}`,children:[h.nickname,"\uFF1A"]}),p]}),t[0]&&e("div",{className:"reply",children:i("span",{children:[i(N,{to:`User?id=${t[0].user.userId}`,children:[t[0].user.nickname,"\uFF1A"]}),t[0].content]})})]}),i("div",{className:"footer",children:[e("span",{className:"date",children:U(n)}),i("span",{className:"like",children:[e(P,{style:{color:"#1890ff"}}),"(",a,")"]})]})]})]},c))]});return i("div",{className:J["comment-list"],children:[i("div",{className:"title",children:["\u8BC4\u8BBA\u5217\u8868",i("span",{className:"total",children:["\u5171 ",o," \u6761"]})]}),l.length>0&&r("\u7CBE\u5F69\u8BC4\u8BBA",l),s.length>0&&r("\u6700\u65B0\u8BC4\u8BBA",s)]})}var X=v.exports.memo(K);export{X as C,W as D};
